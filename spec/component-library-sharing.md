# コンポーネントライブラリ共有機能 構想

## 概要

チームで作成したカスタムコンポーネントを Git リポジトリ経由で共有し、Momoc のサイドバーから直接利用できる機能。インフラ不要でエンジニアの既存ワークフローに自然に乗れることが特徴。

---

## 基本コンセプト

```
専用 Git リポジトリ (GitHub / GitLab / Gitea など)
  ↓
Momoc の設定でリポジトリ URL を登録
  ↓
サイドバーに「チーム」カテゴリが出現
  ↓
チームメンバー全員がコンポーネントを利用できる
```

---

## リポジトリ構造

`.momoc/components/` と同じ構造をそのままリポジトリにする。

```
momoc-components/  ← 専用リポジトリ
  Card.json
  ProductHero.json
  HeroSection.json
  README.md
```

個人ライブラリ (`.momoc/components/`) からチーム共有への昇格は、ファイルをリポジトリに push するだけ。

---

## 同期方針

### リアルタイム同期はしない

リアルタイム同期にすると以下の問題が起きる:

- 誰かが push した瞬間に全員のサイドバーが変わる
- 作業中に使っていたコンポーネントが突然変わる
- 既存の `.moc` ファイルが意図せず壊れる可能性がある

### 明示的な更新（pull）方式を採用

```
サイドバーに「更新を確認」ボタン
  ↓
「Card が v1.2 → v1.3 に更新されています」と通知
  ↓
ユーザーが確認してから取り込む
```

`pnpm update` 的な感覚で、ユーザーが意図的に更新するタイミングを選べる。UI 操作のみで完結し、Git コマンドを意識させない。

---

## Git を使うメリット

| メリット | 内容 |
|---------|------|
| **インフラ不要** | 専用サーバーを立てなくていい |
| **バージョン管理** | 履歴・差分・revert が標準で使える |
| **レビューフロー** | PR でコンポーネント追加・変更をレビューできる |
| **アクセス制御** | リポジトリの権限設定で完結 |
| **壊れても戻せる** | `git revert` で即座に復元可能 |
| **責任の所在** | `git blame` で変更者がわかる |

---

## アクセス制御

- GitHub Organization の private リポジトリで一発解決
- 設定は最初の一回だけ、以降は自動
- 新メンバーのオンボーディングも「リポジトリ URL を設定するだけ」で完結

---

## ユースケース

### チーム内共有

デザイナーとエンジニアの橋渡しとして機能する。

```
デザイナー → Momoc でコンポーネント作成 → リポジトリに push
エンジニア → サイドバーから取り込んで実装に使う
```

### OSS コミュニティ

公開リポジトリにすることで「コミュニティコンポーネント集」として展開できる。

---


## 関連仕様

- [カスタムコンポーネント インポート機能](./custom-component-import.md) — 個人ライブラリの構造・フォーマット
